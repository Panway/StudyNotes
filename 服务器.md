

# æ­å»ºHttpé™æ€æœåŠ¡å™¨ç¯å¢ƒ

æ­å»ºé™æ€ç½‘ç«™ï¼Œé¦–å…ˆéœ€è¦éƒ¨ç½²ç¯å¢ƒã€‚ä¸‹é¢çš„æ­¥éª¤ï¼Œå°†å‘Šè¯‰å¤§å®¶å¦‚ä½•åœ¨æœåŠ¡å™¨ä¸Šé€šè¿‡ Nginx éƒ¨ç½² HTTP é™æ€æœåŠ¡ã€‚

å®‰è£… Nginx
åœ¨ CentOS ä¸Šï¼Œå¯ç›´æ¥ä½¿ç”¨ yum æ¥å®‰è£… Nginx

```
yum install nginx -y
```

å®‰è£…å®Œæˆåï¼Œä½¿ç”¨ nginx å‘½ä»¤å¯åŠ¨ Nginxï¼š

```
nginx
```

æ­¤æ—¶ï¼Œè®¿é—® http://119.29.41.215 å¯ä»¥çœ‹åˆ° Nginx çš„æµ‹è¯•é¡µé¢ 


##å®‰è£… Nginx

é…ç½®é™æ€æœåŠ¡å™¨è®¿é—®è·¯å¾„
å¤–ç½‘ç”¨æˆ·è®¿é—®æœåŠ¡å™¨çš„ Web æœåŠ¡ç”± Nginx æä¾›ï¼ŒNginx éœ€è¦é…ç½®é™æ€èµ„æºçš„è·¯å¾„ä¿¡æ¯æ‰èƒ½é€šè¿‡ url æ­£ç¡®è®¿é—®åˆ°æœåŠ¡å™¨ä¸Šçš„é™æ€èµ„æºã€‚
æ‰“å¼€ Nginx çš„é»˜è®¤é…ç½®æ–‡ä»¶ `/etc/nginx/nginx.conf` ï¼Œä¿®æ”¹ Nginx é…ç½®ï¼Œå°†é»˜è®¤çš„ `root /usr/share/nginx/html`; ä¿®æ”¹ä¸º: `root /data/www;`ï¼Œå¦‚ä¸‹ï¼š

nginx.conf:

``` json
user nginx;
worker_processes auto;
error_log /var/log/nginx/error.log;
pid /run/nginx.pid;

include /usr/share/nginx/modules/*.conf;

events {
    worker_connections 1024;
}

http {
    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';

    access_log  /var/log/nginx/access.log  main;

    sendfile            on;
    tcp_nopush          on;
    tcp_nodelay         on;
    keepalive_timeout   65;
    types_hash_max_size 2048;

    include             /etc/nginx/mime.types;
    default_type        application/octet-stream;

    include /etc/nginx/conf.d/*.conf;

    server {
        listen       80 default_server;
        listen       [::]:80 default_server;
        server_name  _;
        root         /data/www;

        include /etc/nginx/default.d/*.conf;

        location / {
        }

        error_page 404 /404.html;
            location = /40x.html {
        }

        error_page 500 502 503 504 /50x.html;
            location = /50x.html {
        }
    }

}
```


é…ç½®æ–‡ä»¶å°† `/data/www/static` ä½œä¸ºæ‰€æœ‰é™æ€èµ„æºè¯·æ±‚çš„æ ¹è·¯å¾„ï¼Œå¦‚è®¿é—®: http://119.29.41.215/static/index.jsï¼Œå°†ä¼šå» `/data/www/static/` ç›®å½•ä¸‹å»æŸ¥æ‰¾ index.jsã€‚

ç°åœ¨æˆ‘ä»¬éœ€è¦é‡å¯ Nginx è®©æ–°çš„é…ç½®ç”Ÿæ•ˆï¼Œå¦‚ï¼š

```
nginx -s reload
```

é‡å¯åï¼Œç°åœ¨æˆ‘ä»¬åº”è¯¥å·²ç»å¯ä»¥ä½¿ç”¨æˆ‘ä»¬çš„é™æ€æœåŠ¡å™¨äº†ï¼Œç°åœ¨è®©æˆ‘ä»¬æ–°å»ºä¸€ä¸ªé™æ€æ–‡ä»¶ï¼ŒæŸ¥çœ‹æœåŠ¡æ˜¯å¦è¿è¡Œæ­£å¸¸ã€‚
é¦–å…ˆè®©æˆ‘ä»¬åœ¨ /data ç›®å½• ä¸‹åˆ›å»º www ç›®å½•ï¼Œå¦‚ï¼š

```
mkdir -p /data/www
```


åœ¨ /data/www ç›®å½•ä¸‹åˆ›å»ºæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªé™æ€æ–‡ä»¶ index.html


```
<!DOCTYPE html>
<html lang="zh">
<head>    
<meta charset="UTF-8">    
<title>è…¾è®¯äº‘æˆ‘çˆ±ä½ ä¹ˆä¹ˆå“’ğŸ˜˜</title>
</head>
<body>Hello worldï¼</body>
</html>
```


ç°åœ¨è®¿é—® `http://119.29.41.215/index.html` åº”è¯¥å¯ä»¥çœ‹åˆ°é¡µé¢è¾“å‡º Hello world!

åˆ°æ­¤ï¼Œä¸€ä¸ªåŸºäº Nginx çš„é™æ€æœåŠ¡å™¨å°±æ­å»ºå®Œæˆäº†ï¼Œç°åœ¨æ‰€æœ‰æ”¾åœ¨ /data/www ç›®å½•ä¸‹çš„çš„é™æ€èµ„æºéƒ½å¯ä»¥ç›´æ¥é€šè¿‡åŸŸåè®¿é—®ã€‚


#pså‘½ä»¤

```
PeterPoker:timer_job wangchao$ ps -ef
  UID   PID  PPID   C STIME   TTY           TIME CMD
    0     1     0   0  6:49ä¸‹åˆ ??         1:02.52 /sbin/launchd
PeterPoker:timer_job wangchao$ ps -ef |grep python
  501 10063  9875   0 10:26ä¸Šåˆ ttys004    0:00.00 grep python

$ kill -9 pid
```

#åå°è¿è¡Œè„šæœ¬

```
CentOSä¸‹åå°è¿è¡ŒPythonè„šæœ¬
nohup python timer_task2.py &
setsid python xxx.py
```

#æ­å»º GIT æœåŠ¡å™¨æ•™ç¨‹
#####1 ä¸‹è½½å®‰è£… git

Git æ˜¯ä¸€æ¬¾å…è´¹ã€å¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œç”¨äºæ•æ·é«˜æ•ˆåœ°å¤„ç†ä»»ä½•æˆ–å°æˆ–å¤§çš„é¡¹ç›®ã€‚
æ­¤å®éªŒä»¥ CentOS 7.2 x64 çš„ç³»ç»Ÿä¸ºç¯å¢ƒï¼Œæ­å»º git æœåŠ¡å™¨ã€‚

å®‰è£…ä¾èµ–åº“å’Œç¼–è¯‘å·¥å…·

ä¸ºäº†åç»­å®‰è£…èƒ½æ­£å¸¸è¿›è¡Œï¼Œæˆ‘ä»¬å…ˆæ¥å®‰è£…ä¸€äº›ç›¸å…³ä¾èµ–åº“å’Œç¼–è¯‘å·¥å…·

```
yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel
```

å®‰è£…ç¼–è¯‘å·¥å…·

```
yum install gcc perl-ExtUtils-MakeMaker
```

ä¸‹è½½ git


é€‰ä¸€ä¸ªç›®å½•ï¼Œç”¨æ¥æ”¾ä¸‹è½½ä¸‹æ¥çš„å®‰è£…åŒ…ï¼Œè¿™é‡Œå°†å®‰è£…åŒ…æ”¾åœ¨ /usr/local/src ç›®å½•é‡Œ

cd /usr/local/src

åˆ°å®˜ç½‘æ‰¾ä¸€ä¸ªæ–°ç‰ˆç¨³å®šçš„æºç åŒ…ä¸‹è½½åˆ° /usr/local/src æ–‡ä»¶å¤¹é‡Œ

```
wget https://www.kernel.org/pub/software/scm/git/git-2.10.0.tar.gz
```

è§£å‹ä¸‹è½½çš„æºç åŒ…

`tar -zvxf git-2.10.0.tar.gz`

è§£å‹åè¿›å…¥ git-2.10.0 æ–‡ä»¶å¤¹

`cd git-2.10.0`

æ‰§è¡Œç¼–è¯‘

`make all prefix=/usr/local/git`

ç¼–è¯‘å®Œæˆå, å®‰è£…åˆ° /usr/local/git ç›®å½•ä¸‹

`make install prefix=/usr/local/git`


é…ç½®ç¯å¢ƒå˜é‡
å°† git ç›®å½•åŠ å…¥ PATH
å°†åŸæ¥çš„ PATH æŒ‡å‘ç›®å½•ä¿®æ”¹ä¸ºç°åœ¨çš„ç›®å½•
echo 'export PATH=$PATH:/usr/local/git/bin' >> /etc/bashrc
ç”Ÿæ•ˆç¯å¢ƒå˜é‡
source /etc/bashrc
æ­¤æ—¶æˆ‘ä»¬èƒ½æŸ¥çœ‹ git ç‰ˆæœ¬å·ï¼Œè¯´æ˜æˆ‘ä»¬å·²ç»å®‰è£…æˆåŠŸäº†ã€‚
git --version

åˆ›å»º git è´¦å·å¯†ç 
åˆ›å»º git è´¦å·
ä¸ºæˆ‘ä»¬åˆšåˆšæ­å»ºå¥½çš„ git åˆ›å»ºä¸€ä¸ªè´¦å·
useradd -m gituser
ç„¶åä¸ºè¿™ä¸ªè´¦å·è®¾ç½®å¯†ç 
 passwd gituser
 
 åˆ›å»º git ä»“åº“å¹¶åˆå§‹åŒ–
æˆ‘ä»¬åˆ›å»º /data/repositories ç›®å½•ç”¨äºå­˜æ”¾ git ä»“åº“
mkdir -p /data/repositories
åˆ›å»ºå¥½åï¼Œåˆå§‹åŒ–è¿™ä¸ªä»“åº“
cd /data/repositories/ && git init --bare test.git


é…ç½®ç”¨æˆ·æƒé™
ç»™ git ä»“åº“ç›®å½•è®¾ç½®ç”¨æˆ·å’Œç”¨æˆ·ç»„å¹¶è®¾ç½®æƒé™
chown -R gituser:gituser /data/repositories
chmod 755 /data/repositories
æŸ¥æ‰¾ git-shell æ‰€åœ¨ç›®å½•
 , ç¼–è¾‘ /etc/passwd æ–‡ä»¶ï¼Œå°†æœ€åä¸€è¡Œå…³äº gituser çš„ç™»å½• shell é…ç½®æ”¹ä¸º git-shell çš„ç›®å½•
å¦‚ä¸‹passwd

gituser:x:500:500::/home/gituser:/usr/local/git/bin/git-shell


ä½¿ç”¨æ­å»ºå¥½çš„ Git æœåŠ¡
å…‹éš† test repo åˆ°æœ¬åœ°
cd ~ && git clone gituser@123.207.27.137:/data/repositories/test.git





